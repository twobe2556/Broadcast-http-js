!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):e.Broadcast=t(e.jQuery)}("undefined"!=typeof self?self:this,function(e){"use strict";var t=function(e,t={}){this.open=!1,this.channelActive=e,this.port=n(t.port,t.port,""),this.ssl=n(t.ssl,!0===t.ssl?"wss":"ws","ws"),this.serverAddress=this.ssl+"://"+n(t.serverAddress,t.serverAddress,"")+n(this.port,":"+this.port,""),this.channels={},s(this)};let s=function(e){try{let t=e;t.socket=new WebSocket(t.serverAddress+"?channel="+t.channelActive),t.socket.onopen=e=>{console.log("Connected to the server"),t.open=!0},t.socket.onclose=e=>{console.log("Disconnected from the server"),t.open=!1},t.socket.onmessage=e=>{let s=JSON.parse(e.data),{channel:n,event:o,data:r}=s,i=t.channels[n],c={channel:n,event:o};"string"==typeof r?c.message=r:"object"==typeof r&&null!==r&&Object.keys(r).forEach(e=>{c[e]=r[e]}),i&&i.events[o]&&i.events[o].forEach(e=>{e(c)})}}catch(s){}};t.prototype.sendMessage=function(e,t,s){this.open&&this.socket.send(JSON.stringify({channel:e,event:t,data:s}))},t.prototype.subscribe=function(e){let t=new o(this,e);return this.channels[e]=t,t};let n=function(e,t,s){return void 0==e||null==e||""==e?s:t};class o{constructor(e,t){this.pusher=e,this.name=t,this.events={}}bind(e,t){this.events[e]?this.events[e].push(t):this.events[e]=[t]}}return t});